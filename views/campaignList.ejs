<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PundiPundi — Campaigns</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet"/>
    <style>
      :root{--bg:#f4f3ee;--ink:#121313;--muted:#6d6f72;--lux:#d4af37;--stroke:rgba(212,175,55,.18);--hair:rgba(0,0,0,.08);--maxw:1180px;--rule:#0f1010}
      *{box-sizing:border-box}
      html,body{height:100%}
      body{margin:0;background:var(--bg);color:var(--ink);font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;-webkit-font-smoothing:antialiased;line-height:1.35}
      .wrap{max-width:var(--maxw);margin:0 auto;padding:28px 24px 56px}
      .nav{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;font-size:12px;letter-spacing:.06em;text-transform:lowercase;margin-bottom:clamp(28px,5vw,48px)}
      .nav__brand{font-weight:800;letter-spacing:.08em}
      .nav__right{justify-self:end}
      .nav__right a{color:var(--ink);text-decoration:none;border-bottom:1px solid transparent}
      .nav__right a:hover{border-bottom-color:var(--ink)}
      .nav__actions{display:flex;gap:10px;align-items:center}
      .pill{text-decoration:none;font-weight:600;padding:8px 12px;border-radius:999px;border:1px solid var(--stroke);color:var(--ink);background:transparent;transition:transform .06s ease,border-color .2s ease,box-shadow .2s ease}
      .pill:hover{transform:translateY(-1px);border-color:var(--lux)}
      .pill--gold{background:linear-gradient(90deg,var(--lux),#b9962f);color:#111;border-color:transparent;box-shadow:0 8px 24px rgba(212,175,55,.22)}
      .pill--gold:hover{transform:translateY(-1px);box-shadow:0 10px 30px rgba(212,175,55,.28)}
      .hero{margin-top:6px;margin-bottom:18px}
      .hero__word{margin:0;font-weight:800;text-transform:lowercase;letter-spacing:-.02em;font-size:clamp(36px,9vw,84px);line-height:.98}
      .hero__rule{height:1px;background:var(--rule);opacity:.7;margin:10px 0 18px}
      .search{display:flex;gap:10px;align-items:center;margin-bottom:18px;flex-wrap:wrap}
      .input{flex:1 1 260px;min-width:220px;background:transparent;color:var(--ink);border:1px solid var(--hair);border-radius:12px;padding:12px 14px;font-size:15px;outline:none;transition:border-color .2s,box-shadow .2s}
      .input:focus{border-color:var(--lux);box-shadow:0 0 0 3px rgba(212,175,55,.22)}
      .btn{appearance:none;border:0;cursor:pointer;padding:12px 16px;border-radius:12px;font-weight:600;font-size:15px;background:linear-gradient(90deg,var(--lux),#b9962f);color:#111;box-shadow:0 10px 30px rgba(212,175,55,.2);transition:transform .08s ease,box-shadow .2s ease}
      .btn:hover{transform:translateY(-1px);box-shadow:0 12px 36px rgba(212,175,55,.26)}
      .tablewrap{overflow:auto;border:1px solid var(--stroke);border-radius:16px;background:rgba(255,255,255,.25)}
      table{width:100%;border-collapse:collapse;min-width:860px}
      thead th{text-align:left;font-size:12px;letter-spacing:.06em;text-transform:uppercase;padding:12px 14px;border-bottom:1px solid var(--stroke);background:linear-gradient(180deg,rgba(255,255,255,.45),rgba(255,255,255,.18));position:sticky;top:0}
      tbody td{padding:12px 14px;border-bottom:1px solid rgba(0,0,0,.06);vertical-align:top}
      tbody tr:hover{background:rgba(212,175,55,.06)}
      .amount{white-space:nowrap;font-weight:600}
      .status{display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid var(--stroke);font-size:12px;background:linear-gradient(180deg,rgba(255,255,255,.6),rgba(255,255,255,.2))}
      .donate{display:inline-block;text-decoration:none;padding:8px 12px;border-radius:10px;font-weight:600;font-size:14px;background:linear-gradient(90deg,var(--lux),#b9962f);color:#111;box-shadow:0 8px 24px rgba(212,175,55,.18);transition:transform .08s ease,box-shadow .2s ease}
      .donate:hover{transform:translateY(-1px);box-shadow:0 10px 30px rgba(212,175,55,.24)}
      .muted{color:var(--muted)}
      @media (max-width:720px){.nav{grid-template-columns:1fr 1fr;row-gap:10px}.nav__actions{grid-column:1 / -1;justify-self:center}.nav__right{justify-self:end}}
      .alert{padding:10px 12px;border-radius:10px;margin:8px 0;font-size:14px}
      .alert.success{background:#ecfdf5;border:1px solid #10b98133;color:#065f46}
      .alert.error{background:#fff5f5;border:1px solid #ef444433;color:#7f1d1d}
    </style>
  </head>
  <body>
    <div class="wrap">
      <!-- NAV (match userHome) -->
      <nav class="nav">
        <div class="nav__brand">pundipundi</div>
        <div class="nav__actions">
          <a class="pill" href="/userHome/<%= id %>">home</a>
          <a class="pill pill--gold" href="/addCampaign/<%= id %>">create campaign</a>
        </div>
        <div class="nav__right"><a href="/logout">logout</a></div>
      </nav>

      <!-- HEADER -->
      <header class="hero">
        <h1 class="hero__word">campaigns</h1>
        <div class="hero__rule"></div>
      </header>

      <!-- SEARCH -->
      <form class="search" action="/campaignList/<%= id %>" method="GET">
        <input class="input" type="text" name="search" placeholder="Cari judul campaign…" value="<%= search || '' %>"/>
        <button class="btn" type="submit">Search</button>
      </form>

      <!-- Alerts (tanpa arrow function) -->
      <% if (preview) { %>
        <div class="alert success"><a href="<%= preview %>" target="_blank" rel="noopener">Buka preview email</a></div>
      <% } %>
      <% for (const m of (success || [])) { %>
        <div class="alert success"><%= m %></div>
      <% } %>
      <% for (const m of (error || [])) { %>
        <div class="alert error"><%= m %></div>
      <% } %>

      <!-- TABLE -->
      <div class="tablewrap">
        <table>
          <thead>
            <tr>
              <th style="min-width:180px">Title</th>
              <th>Description</th>
              <th>Goal</th>
              <th>Current</th>
              <th style="min-width:120px">Start</th>
              <th style="min-width:120px">End</th>
              <th>Status</th>
              <th style="min-width:120px">Action</th>
            </tr>
          </thead>
          <tbody>
            <% if (campaigns && campaigns.length) { %>
              <% for (const el of campaigns) { %>
                <tr>
                  <td><strong><%= el.title %></strong></td>
                  <td class="muted"><%= el.description %></td>
                  <td class="amount"><%= formatRupiah(el.goalAmount) %></td>
                  <td class="amount"><%= formatRupiah(el.currentAmount) %></td>
                  <td><%= el.startDates %></td>
                  <td><%= el.endDates %></td>
                  <td><span class="status"><%= el.status %></span></td>
                  <td><a class="donate" href="/donate/<%= id %>/<%= el.id %>">Donate</a></td>
                </tr>
              <% } %>
            <% } else { %>
              <tr>
                <td colspan="8" class="muted" style="text-align:center;padding:22px">
                  Belum ada campaign yang cocok.
                </td>
              </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
