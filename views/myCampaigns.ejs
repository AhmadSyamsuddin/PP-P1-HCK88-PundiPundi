<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PundiPundi â€” My Campaigns</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #f4f3ee;
        --ink: #121313;
        --muted: #6d6f72;
        --lux: #d4af37;
        --stroke: rgba(212, 175, 55, 0.18);
        --hair: rgba(0, 0, 0, 0.08);
        --maxw: 1180px;
        --rule: #0f1010;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: var(--bg);
        color: var(--ink);
        font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial,
          sans-serif;
        -webkit-font-smoothing: antialiased;
        line-height: 1.35;
      }
      .wrap {
        max-width: var(--maxw);
        margin: 0 auto;
        padding: 28px 24px 56px;
      }

      /* NAV (konsisten) */
      .nav {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        font-size: 12px;
        letter-spacing: 0.06em;
        text-transform: lowercase;
        margin-bottom: clamp(28px, 5vw, 48px);
      }
      .nav__brand {
        font-weight: 800;
        letter-spacing: 0.08em;
      }
      .nav__right {
        justify-self: end;
      }
      .nav__right a {
        color: var(--ink);
        text-decoration: none;
        border-bottom: 1px solid transparent;
      }
      .nav__right a:hover {
        border-bottom-color: var(--ink);
      }
      .nav__actions {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      .pill {
        text-decoration: none;
        font-weight: 600;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid var(--stroke);
        color: var(--ink);
        background: transparent;
        transition: transform 0.06s ease, border-color 0.2s ease,
          box-shadow 0.2s ease;
      }
      .pill:hover {
        transform: translateY(-1px);
        border-color: var(--lux);
      }
      .pill--gold {
        background: linear-gradient(90deg, var(--lux), #b9962f);
        color: #111;
        border-color: transparent;
        box-shadow: 0 8px 24px rgba(212, 175, 55, 0.22);
      }
      .pill--gold:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 30px rgba(212, 175, 55, 0.28);
      }

      /* HEADER */
      .hero {
        margin-top: 6px;
        margin-bottom: 18px;
      }
      .hero__word {
        margin: 0;
        font-weight: 800;
        text-transform: lowercase;
        letter-spacing: -0.02em;
        font-size: clamp(36px, 9vw, 84px);
        line-height: 0.98;
      }
      .hero__rule {
        height: 1px;
        background: var(--rule);
        opacity: 0.7;
        margin: 10px 0 18px;
      }

      /* EMPTY STATE */
      .empty {
        border: 1px solid var(--stroke);
        border-radius: 16px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.45),
          rgba(255, 255, 255, 0.18)
        );
        padding: clamp(18px, 3.6vw, 28px);
        text-align: center;
        box-shadow: 0 12px 34px rgba(0, 0, 0, 0.05);
      }
      .empty h3 {
        margin: 0 0 8px 0;
        font-size: 20px;
        font-weight: 800;
      }
      .empty p {
        margin: 0 0 14px 0;
        color: var(--muted);
      }
      .btn {
        display: inline-block;
        text-decoration: none;
        font-weight: 600;
        padding: 12px 16px;
        border-radius: 12px;
        background: linear-gradient(90deg, var(--lux), #b9962f);
        color: #111;
        box-shadow: 0 10px 30px rgba(212, 175, 55, 0.22);
        transition: transform 0.08s ease, box-shadow 0.2s ease;
      }
      .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 36px rgba(212, 175, 55, 0.28);
      }

      /* CARDS GRID */
      .grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: clamp(14px, 2.8vw, 24px);
      }
      @media (max-width: 760px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }

      .card {
        border: 1px solid var(--stroke);
        border-radius: 16px;
        padding: clamp(16px, 3vw, 22px);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.35),
          rgba(255, 255, 255, 0.12)
        );
        box-shadow: 0 12px 34px rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
      }
      .card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
          400px 160px at -10% -20%,
          rgba(212, 175, 55, 0.08),
          transparent 60%
        );
        pointer-events: none;
      }
      .title {
        margin: 0 0 6px 0;
        font-size: 18px;
        font-weight: 800;
      }
      .desc {
        margin: 0 0 12px 0;
        color: var(--muted);
        font-size: 14px;
      }

      /* PROGRESS */
      .bar {
        height: 12px;
        border-radius: 999px;
        overflow: hidden;
        border: 1px solid var(--hair);
        background: rgba(0, 0, 0, 0.05);
      }
      .bar > span {
        display: block;
        height: 100%;
        background: linear-gradient(90deg, var(--lux), #b9962f);
        width: 0%;
        transition: width 0.6s ease;
      }
      .meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 8px;
        font-size: 13px;
        color: var(--muted);
      }
      .status {
        display: inline-block;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--stroke);
        font-size: 12px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.6),
          rgba(255, 255, 255, 0.2)
        );
      }

      /* ACTIONS */
      .row-actions {
        margin-top: 12px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .link {
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid var(--stroke);
        color: var(--ink);
        background: transparent;
        transition: transform 0.06s ease, border-color 0.2s ease,
          box-shadow 0.2s ease;
      }
      .link:hover {
        transform: translateY(-1px);
        border-color: var(--lux);
      }
      .link--danger {
        border-color: rgba(220, 38, 38, 0.25);
        color: #8a1f1f;
        background: #fff5f5;
      }
      .link--danger:hover {
        border-color: rgba(220, 38, 38, 0.5);
        box-shadow: 0 8px 20px rgba(220, 38, 38, 0.18);
        transform: translateY(-1px);
      }

      .alert{
      margin:0 0 12px; padding:10px 12px; font-size:13px;
      border:1px solid rgba(220,38,38,.25); color:#8a1f1f; background:#fff5f5; border-radius:10px;
    }
    </style>
  </head>
  <body>
    <div class="wrap">
      <!-- NAV -->
      <nav class="nav">
        <div class="nav__brand">pundipundi</div>
        <div class="nav__actions">
          <a class="pill" href="/userHome/<%= id %>">Home</a>
          <a class="pill pill--gold" href="/addCampaign/<%= id %>"
            >create campaign</a
          >
        </div>
        <div class="nav__right">
          <a href="/logout">logout</a>
        </div>
      </nav>

      <!-- HEADER -->
      <header class="hero">
        <h1 class="hero__word">my campaigns</h1>
        <div class="hero__rule"></div>
      </header>

      <% if (msg) { %>
          <div class="alert"><%= msg %></div>
      <% } %>

      <% if (campaign.length === 0) { %>
      <!-- EMPTY -->
      <section class="empty">
        <h3>Kamu belum punya campaign</h3>
        <p>Buat campaign pertamamu dan mulai gerakkan kebaikan.</p>
        <a class="btn" href="/addCampaign/<%= id %>">Make New Campaign</a>
      </section>
      <% } else { %>
      <!-- LIST -->
      <section class="grid">
        <% campaign.forEach((el, i) => { const goal = Number(el.goalAmount ||
        0); const cur = Number(el.currentAmount || 0); const pct = Math.max(0,
        Math.min(100, goal ? Math.round((cur/goal)*100) : 0)); %>
        <article class="card">
          <h3 class="title"><%= el.title %></h3>
          <p class="desc"><%= el.description %></p>

          <div class="bar" aria-label="progress">
            <span style="--w: <%= pct %>"></span>
          </div>

          <div class="meta">
            <span><%= pct %>% funded</span>
            <span class="status"><%= el.status %></span>
          </div>

          <div class="row-actions">
            <a class="link" href="/campaignList/<%= id %>">View</a>
            <a
              class="link link--danger"
              href="/myCampaign/<%= el.id %>/delete/<%= id %>"
              onclick="return confirm('Hapus campaign ini? Tindakan tidak bisa dibatalkan.')"
            >
              Delete
            </a>
          </div>
        </article>
        <% }) %>
      </section>
      <% } %>

      <!-- CTA bawah -->
      <div style="margin-top: 18px">
        <a class="btn" href="/addCampaign/<%= id %>">Make New Campaign</a>
      </div>
    </div>
  </body>
</html>
